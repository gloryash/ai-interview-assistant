# 场景扩展指南

> 文档版本：v1.0
> 更新日期：2026-01-29

---

## 1. 概述

本项目采用 Prompt 驱动架构，支持通过配置文件快速扩展新的访谈场景。本文档介绍如何添加新场景，以及几个典型场景的配置示例。

---

## 2. 扩展步骤

### 2.1 创建场景配置文件

在 `src/config/scenarios/` 目录下创建新的配置文件：

```
src/config/scenarios/
├── index.ts                  # 场景注册
├── ai-interview.ts           # AI 产品访谈（已有）
├── ai-daily-reflection.ts    # AI 复盘（已有）
└── user-research.ts          # 用户调研（可扩展）
```

### 2.2 定义场景配置

```typescript
import type { ScenarioConfig } from '../../types/scenario';

export const myScenario: ScenarioConfig = {
  id: 'my-scenario',           // 唯一标识
  name: '我的场景',             // 显示名称
  interviewPrompt: '...',      // 访谈 AI 的系统 Prompt
  stages: [...],               // 访谈阶段
  outputs: [...],              // 产出物配置
};
```

### 2.3 注册场景

在 `src/config/scenarios/index.ts` 中注册：

```typescript
import { aiInterviewScenario } from './ai-interview';
import { myScenario } from './my-scenario';

export const scenarios: ScenarioConfig[] = [
  aiInterviewScenario,
  myScenario,  // 新增
];
```

---

## 3. 配置详解

### 3.1 interviewPrompt（访谈 Prompt）

这是访谈 AI 的系统 Prompt，决定了 AI 的角色、风格和行为。

**编写要点**：
- 明确 AI 的角色定位
- 说明访谈的目的和流程
- 定义对话风格（口语化、简短）
- 列出需要收集的信息类型

### 3.2 stages（访谈阶段）

定义访谈的流程阶段，每个阶段有特定的目标。

```typescript
stages: [
  {
    id: 'opening',
    name: '开场',
    prompt: '友好地打招呼，说明访谈目的',
    requiredFields: [],
  },
  {
    id: 'main',
    name: '主体',
    prompt: '收集核心信息',
    requiredFields: ['field1', 'field2'],
  },
  // ...
]
```

### 3.3 outputs（产出物）

定义访谈结束后要生成的文档。

```typescript
outputs: [
  {
    id: 'report',
    name: '访谈报告',
    generatorPrompt: `基于访谈记录生成报告...`,
  },
]
```

---

## 4. 场景示例：AI 复盘

以下是「AI 复盘」场景的完整配置示例：

```typescript
// src/config/scenarios/ai-daily-reflection.ts
import type { ScenarioConfig } from '../../types/scenario';

export const aiDailyReflectionScenario: ScenarioConfig = {
  id: 'ai-daily-reflection',
  name: 'AI 复盘',

  interviewPrompt: `你是一位温暖的复盘引导师，正在帮助营地学员回顾今天的经历。

## 你的角色
- 像一位知心朋友，用轻松的对话方式引导复盘
- 善于倾听，能从学员的描述中发现亮点和成长
- 会适时追问，帮助学员深入反思

## 复盘原则
1. 每次只问 1-2 个问题
2. 用简短的语言回应（2-3 句话）
3. 先肯定做得好的地方，再引导思考改进
4. 不要使用 markdown 格式，用口语化表达
5. 禁止使用任何表情符号

## 复盘流程
1. 今天的基本情况（营地阶段、主要活动）
2. 今日项目/体验进展
3. AI 协作亮点与困难
4. 情绪与社交高光
5. 吐槽/困扰
6. 明日计划

## 开场
请主动友好地打招呼，然后问学员今天过得怎么样。`,

  stages: [
    { id: 'opening', name: '开场', prompt: '了解今天的基本情况', requiredFields: [] },
    { id: 'progress', name: '进展', prompt: '了解项目/体验进展', requiredFields: ['todayProgress'] },
    { id: 'ai-collab', name: 'AI协作', prompt: '了解AI使用情况', requiredFields: ['aiHighlights', 'aiChallenges'] },
    { id: 'social', name: '社交', prompt: '了解情绪和社交', requiredFields: ['emotionalHighlights'] },
    { id: 'concerns', name: '困扰', prompt: '了解吐槽和困扰', requiredFields: ['concerns'] },
    { id: 'tomorrow', name: '明日', prompt: '规划明天', requiredFields: ['tomorrowPlan'] },
  ],

  outputs: [
    {
      id: 'daily-reflection',
      name: '复盘报告',
      generatorPrompt: `基于学员复盘访谈记录，生成一份结构化的复盘报告。

## 报告结构
1. 基本信息（营地阶段、日期）
2. 今日项目/体验进展
3. AI 协作亮点与困难
4. 情绪与社交高光
5. 吐槽/困扰
6. 明日计划

使用 Markdown 格式，语言温暖鼓励。`,
    },
  ],
};
```

---

## 5. 场景示例：用户调研

```typescript
// src/config/scenarios/user-research.ts
export const userResearchScenario: ScenarioConfig = {
  id: 'user-research',
  name: '用户调研',

  interviewPrompt: `你是一位专业的用户研究员，正在进行用户访谈。

## 你的角色
- 保持中立客观，不引导用户回答
- 善于追问"为什么"，挖掘深层需求
- 关注用户的行为和情感，而非假设

## 访谈原则
1. 开放式问题为主
2. 避免引导性提问
3. 多问"能举个例子吗？"
4. 关注具体行为而非态度

## 访谈流程
1. 背景了解
2. 当前行为
3. 痛点挖掘
4. 期望探索
5. 总结确认`,

  stages: [
    { id: 'background', name: '背景', prompt: '了解用户背景', requiredFields: [] },
    { id: 'behavior', name: '行为', prompt: '了解当前行为', requiredFields: [] },
    { id: 'pain_points', name: '痛点', prompt: '挖掘痛点', requiredFields: [] },
    { id: 'expectations', name: '期望', prompt: '探索期望', requiredFields: [] },
  ],

  outputs: [
    { id: 'research-notes', name: '调研笔记', generatorPrompt: '...' },
    { id: 'insight-report', name: '洞察报告', generatorPrompt: '...' },
  ],
};
```

---

## 6. Prompt 编写最佳实践

### 6.1 interviewPrompt 编写要点

| 要素 | 说明 | 示例 |
|-----|------|-----|
| 角色定位 | 明确 AI 扮演什么角色 | "你是一位资深产品经理" |
| 对话风格 | 口语化、简短 | "每次回复 2-3 句话" |
| 流程说明 | 列出访谈步骤 | "按以下顺序了解..." |
| 禁止事项 | 避免不当行为 | "禁止使用 emoji" |

### 6.2 generatorPrompt 编写要点

| 要素 | 说明 |
|-----|------|
| 输出格式 | 明确使用 Markdown |
| 文档结构 | 列出章节大纲 |
| 语言风格 | 专业/通俗 |
| 缺失处理 | 信息不全时标注"待补充" |

---

## 7. 场景对比

| 场景 | 目的 | 主要产出 |
|-----|------|---------|
| AI 产品访谈 | 梳理产品需求 | PRD、用户画像 |
| AI 复盘 | 每日反思 | 复盘报告 |
| 用户调研 | 了解用户需求 | 调研笔记、洞察报告 |

---

## 8. 总结

通过 Prompt 驱动架构，新增场景只需：

1. 创建配置文件
2. 编写 interviewPrompt
3. 定义 stages
4. 配置 outputs
5. 注册场景

无需修改任何核心代码，即可支持全新的访谈场景。
