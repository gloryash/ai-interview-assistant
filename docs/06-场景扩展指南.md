# 场景扩展指南

> 文档版本：v1.0
> 更新日期：2026-01-29

---

## 1. 概述

本项目采用 Prompt 驱动架构，支持通过配置文件快速扩展新的访谈场景。本文档介绍如何添加新场景，以及几个典型场景的配置示例。

---

## 2. 扩展步骤

### 2.1 创建场景配置文件

在 `src/config/scenarios/` 目录下创建新的配置文件：

```
src/config/scenarios/
├── index.ts              # 场景注册
├── ai-interview.ts       # AI 产品访谈（已有）
├── ta-review.ts          # 助教复盘（新增）
└── user-research.ts      # 用户调研（新增）
```

### 2.2 定义场景配置

```typescript
import type { ScenarioConfig } from '../../types/scenario';

export const myScenario: ScenarioConfig = {
  id: 'my-scenario',           // 唯一标识
  name: '我的场景',             // 显示名称
  interviewPrompt: '...',      // 访谈 AI 的系统 Prompt
  stages: [...],               // 访谈阶段
  outputs: [...],              // 产出物配置
};
```

### 2.3 注册场景

在 `src/config/scenarios/index.ts` 中注册：

```typescript
import { aiInterviewScenario } from './ai-interview';
import { myScenario } from './my-scenario';

export const scenarios: ScenarioConfig[] = [
  aiInterviewScenario,
  myScenario,  // 新增
];
```

---

## 3. 配置详解

### 3.1 interviewPrompt（访谈 Prompt）

这是访谈 AI 的系统 Prompt，决定了 AI 的角色、风格和行为。

**编写要点**：
- 明确 AI 的角色定位
- 说明访谈的目的和流程
- 定义对话风格（口语化、简短）
- 列出需要收集的信息类型

### 3.2 stages（访谈阶段）

定义访谈的流程阶段，每个阶段有特定的目标。

```typescript
stages: [
  {
    id: 'opening',
    name: '开场',
    prompt: '友好地打招呼，说明访谈目的',
    requiredFields: [],
  },
  {
    id: 'main',
    name: '主体',
    prompt: '收集核心信息',
    requiredFields: ['field1', 'field2'],
  },
  // ...
]
```

### 3.3 outputs（产出物）

定义访谈结束后要生成的文档。

```typescript
outputs: [
  {
    id: 'report',
    name: '访谈报告',
    generatorPrompt: `基于访谈记录生成报告...`,
  },
]
```

---

## 4. 场景示例：助教复盘

以下是「助教复盘」场景的完整配置示例：

```typescript
// src/config/scenarios/ta-review.ts
import type { ScenarioConfig } from '../../types/scenario';

export const taReviewScenario: ScenarioConfig = {
  id: 'ta-review',
  name: '助教复盘',

  interviewPrompt: `你是一位经验丰富的教学督导，正在帮助助教进行课程复盘。

## 你的角色
- 像一位资深同事，用轻松的对话方式引导复盘
- 善于倾听，能从助教的描述中发现亮点和改进点
- 会适时追问，帮助助教深入反思

## 复盘原则
1. 每次只问 1-2 个问题
2. 用简短的语言回应（2-3 句话）
3. 先肯定做得好的地方，再引导思考改进
4. 不要使用 markdown 格式，用口语化表达
5. 禁止使用任何表情符号

## 复盘流程
1. 课程基本情况（什么课、多少学生）
2. 教学目标达成情况
3. 学生参与度和反馈
4. 遇到的挑战和处理方式
5. 做得好的地方
6. 可以改进的地方
7. 下次课的计划

## 开场
请主动友好地打招呼，然后问助教今天上的是什么课。`,

  stages: [
    { id: 'opening', name: '开场', prompt: '了解课程基本情况', requiredFields: [] },
    { id: 'goals', name: '目标达成', prompt: '了解教学目标是否达成', requiredFields: ['teachingGoals', 'goalAchievement'] },
    { id: 'engagement', name: '学生参与', prompt: '了解学生参与度', requiredFields: ['studentEngagement', 'studentFeedback'] },
    { id: 'challenges', name: '挑战应对', prompt: '了解遇到的挑战', requiredFields: ['challenges', 'solutions'] },
    { id: 'highlights', name: '亮点', prompt: '发现做得好的地方', requiredFields: ['highlights'] },
    { id: 'improvements', name: '改进', prompt: '思考改进方向', requiredFields: ['improvements'] },
    { id: 'next_steps', name: '下一步', prompt: '规划下次课', requiredFields: ['nextSteps'] },
  ],

  outputs: [
    {
      id: 'review-report',
      name: '复盘报告',
      generatorPrompt: `基于助教复盘访谈记录，生成一份结构化的复盘报告。

## 报告结构
1. 课程概况（课程名称、学生人数、时间）
2. 教学目标与达成情况
3. 学生参与度分析
4. 挑战与应对
5. 亮点总结
6. 改进建议
7. 下次课行动计划

使用 Markdown 格式，语言简洁专业。`,
    },
    {
      id: 'action-items',
      name: '行动清单',
      generatorPrompt: `基于复盘访谈，提取可执行的行动清单。

## 输出格式
- 使用 Markdown 清单格式
- 每个行动项要具体、可执行
- 按优先级排序
- 标注预期完成时间`,
    },
  ],
};
```

---

## 5. 场景示例：用户调研

```typescript
// src/config/scenarios/user-research.ts
export const userResearchScenario: ScenarioConfig = {
  id: 'user-research',
  name: '用户调研',

  interviewPrompt: `你是一位专业的用户研究员，正在进行用户访谈。

## 你的角色
- 保持中立客观，不引导用户回答
- 善于追问"为什么"，挖掘深层需求
- 关注用户的行为和情感，而非假设

## 访谈原则
1. 开放式问题为主
2. 避免引导性提问
3. 多问"能举个例子吗？"
4. 关注具体行为而非态度

## 访谈流程
1. 背景了解
2. 当前行为
3. 痛点挖掘
4. 期望探索
5. 总结确认`,

  stages: [
    { id: 'background', name: '背景', prompt: '了解用户背景', requiredFields: [] },
    { id: 'behavior', name: '行为', prompt: '了解当前行为', requiredFields: [] },
    { id: 'pain_points', name: '痛点', prompt: '挖掘痛点', requiredFields: [] },
    { id: 'expectations', name: '期望', prompt: '探索期望', requiredFields: [] },
  ],

  outputs: [
    { id: 'research-notes', name: '调研笔记', generatorPrompt: '...' },
    { id: 'insight-report', name: '洞察报告', generatorPrompt: '...' },
  ],
};
```

---

## 6. Prompt 编写最佳实践

### 6.1 interviewPrompt 编写要点

| 要素 | 说明 | 示例 |
|-----|------|-----|
| 角色定位 | 明确 AI 扮演什么角色 | "你是一位资深产品经理" |
| 对话风格 | 口语化、简短 | "每次回复 2-3 句话" |
| 流程说明 | 列出访谈步骤 | "按以下顺序了解..." |
| 禁止事项 | 避免不当行为 | "禁止使用 emoji" |

### 6.2 generatorPrompt 编写要点

| 要素 | 说明 |
|-----|------|
| 输出格式 | 明确使用 Markdown |
| 文档结构 | 列出章节大纲 |
| 语言风格 | 专业/通俗 |
| 缺失处理 | 信息不全时标注"待补充" |

---

## 7. 场景对比

| 场景 | 目的 | 主要产出 |
|-----|------|---------|
| AI 产品访谈 | 梳理产品需求 | PRD、用户画像 |
| 助教复盘 | 教学反思 | 复盘报告、行动清单 |
| 用户调研 | 了解用户需求 | 调研笔记、洞察报告 |

---

## 8. 总结

通过 Prompt 驱动架构，新增场景只需：

1. 创建配置文件
2. 编写 interviewPrompt
3. 定义 stages
4. 配置 outputs
5. 注册场景

无需修改任何核心代码，即可支持全新的访谈场景。
